<div class="span12">
	<div id="theForum" class="form-horizontal">

	</div>
</div>

<script>
	var form = "<legend id=\"legend\">" + indexProps.Legend + "</legend>";
	delete formProps.Legend;
	fields = Object.keys(formProps);
	for(field in fields) {
		var name = fields[field];
		var value = formProps[name];
		var defaultVal = value.split(';')[0];
		var hoverText = value.split(';')[1];
		var fieldName = name;
		form += "<div id=\"" + fieldName + "-cg\" class=\"control-group\">" 
					+"<a class=\"link\" data-original-title=\"" + hoverText + "\"><label class=\"control-label\" for=\"" + fieldName + "\">" + name + "</label>"
					+"<div class=\"controls\">"
							+"<input id=\"" + fieldName + "\" type=\"text\" value=\""+ defaultVal + "\">"
					+"</div>"
				+"</div></a>";
	}
	
	form += "</br><button type=\"submit\" class=\"btn\" onClick=\"submitForm()\">Submit</button>";
	$("#theForum").html(form);
	$(".link").tooltip();
	
	function submitForm() {
		var dic = "";
		for(field in fields) {
			name = fields[field];
			value = $("#" + name).val();
			dic += "\"" + name + "\":\"" + value + "\",";
		}
		// cutoff the last comma
		dic = dic.substring(0, dic.length - 1);

		$.ajax({
			url: '../../query', 
			data: dic,
			success: parseResponse,
		});
	}
	
	function echoData(data) {
		$('#theForum').html(data);
	}
	
	function parseResponse(data) {
		data = $.parseJSON(data);
		toRet = "<h1>Results:</h1>";
		//Grab important keys
		params = data["params"];
		sensors = data['sensors'];
		stats = data['stats'];
		filenames = data['filenames'];
		
		//Re-Print params
		toRet += "<h3>Parameters:</h4>";
		for(key in params) {
			toRet += "<b>" + key + "</b>" + ": " + params[key] + "</br>";
		}
		
		toRet += "<h3>Stats:</h4>";
		for(key in stats) {
			toRet +="<b>" + key + "</b>" +  ": " + stats[key] + "</br>";
		}
		
		toRet += "<h3>Graphs:</h4>";
		for(key in filenames) {
			toRet += "<image src=\"../" + filenames[key] + "\"></image>";
		}
		$('#theForum').html(toRet);
	}
</script>